<!DOCTYPE html>
<html lang="zxx">
   <head>
      <meta charset="UTF-8" />
      <meta
         name="description"
         content="Hiroto Template" />
      <meta
         name="keywords"
         content="Hiroto, unica, creative, html" />
      <meta
         name="viewport"
         content="width=device-width, initial-scale=1.0" />
      <meta
         http-equiv="X-UA-Compatible"
         content="ie=edge" />

      <title>BookingSystem</title>

      <!-- icon web -->
      <link
         rel="icon"
         href="https://www.pinpng.com/pngs/m/144-1449172_hotel-png-icon-hotel-vector-icon-png-transparent.png" />

      <!--boxi icon -->
      <link
         href="https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css"
         rel="stylesheet" />
      <link
         rel="stylesheet"
         href="/client/css/elegant-icons.css"
         type="text/css" />
      <!-- fontawesome -->
      <link
         rel="stylesheet"
         href="/client/css/font-awesome.min.css"
         type="text/css" />
      <!-- Css Styles -->
      <link
         rel="stylesheet"
         href="/client/css/bootstrap.min.css"
         type="text/css" />
      <link
         rel="stylesheet"
         href="/client/css/font-awesome.min.css"
         type="text/css" />
      <link
         rel="stylesheet"
         href="/client/css/elegant-icons.css"
         type="text/css" />
      <link
         rel="stylesheet"
         href="/client/css/nice-select.css"
         type="text/css" />
      <link
         rel="stylesheet"
         href="/client/css/jquery-ui.min.css"
         type="text/css" />
      <link
         rel="stylesheet"
         href="/client/css/owl.carousel.min.css"
         type="text/css" />
      <link
         rel="stylesheet"
         href="/client/css/slicknav.min.css"
         type="text/css" />
      <link
         rel="stylesheet"
         href="/client/css/header-bootstrap.css"
         type="text/css" />
      <!-- toast -->
      <link
         rel="stylesheet"
         href="/client/css/toastr.css"
         type="text/css" />

      <!-- Css Styles -->
      <link
         rel="stylesheet"
         href="/client/css/owl.carousel.min.css"
         type="text/css" />

      <link
         rel="stylesheet"
         href="/client/css/style.css"
         type="text/css" />
      <link
         rel="stylesheet"
         href="/client/css/header.css"
         type="text/css" />
      <link
         rel="stylesheet"
         href="/client/css/room.css"
         type="text/css" />
      <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
      <style>
         #booking {
            height: 300px;
         }
         .card {
            border: none;
            box-shadow: 5px 6px 6px 2px #e9ecef;
            border-radius: 4px;
         }

         .dots {
            height: 4px;
            width: 4px;
            margin-bottom: 2px;
            background-color: #bbb;
            border-radius: 50%;
            display: inline-block;
         }

         .badge {
            padding: 7px;
            padding-right: 9px;
            padding-left: 16px;
            box-shadow: 5px 6px 6px 2px #e9ecef;
         }

         .user-img {
            margin-top: 4px;
         }

         .check-icon {
            font-size: 17px;
            color: #c3bfbf;
            top: 1px;
            position: relative;
            margin-left: 3px;
         }

         .form-check-input {
            margin-top: 6px;
            margin-left: -24px !important;
            cursor: pointer;
         }

         .form-check-input:focus {
            box-shadow: none;
         }

         .icons i {
            margin-left: 8px;
         }
         .reply {
            margin-left: 12px;
         }

         .reply small {
            color: #b7b4b4;
         }
      </style>
   </head>

   <body>
      <div class="loading">
         <div class="loader"></div>
      </div>
      <div id="header">
         <div class="header-nav">
            <div class="header-logo">
               <img
                  src="/client/img/mylogo.svg"
                  alt=""
                  class="logo" />
            </div>
            <ul class="nav-list">
               <li class="nav-item">
                  <a
                     href="/"
                     class="nav-link-nb"
                     >Trang chủ</a
                  >
               </li>

               <li class="nav-item">
                  <a
                     href="/rooms"
                     class="nav-link-nb nav-link-nb-main"
                     >Khách sạn & Resort</a
                  >
               </li>
               <li class="nav-item">
                  <a
                     href="/Flights"
                     class="nav-link-nb"
                     >Vé máy bay</a
                  >
               </li>
               <li class="nav-item">
                  <a
                     href="/hotel"
                     class="nav-link-nb"
                     >Thông tin</a
                  >
               </li>
               <li class="nav-item">
                  <a
                     href="/location"
                     class="nav-link-nb"
                     >Vị trí</a
                  >
               </li>
            </ul>
         </div>
         <div class="header-account">
            <a
               class="btn-login btn-account"
               href="/login"
               ><i class="bx bx-user"></i>Đăng nhập
            </a>
            <a
               class="btn-register btn-account"
               href="/register"
               >Đăng ký
            </a>
         </div>
      </div>
      <div
         id="booking"
         class="section">
         <div class="section-center">
            <div class="container">
               <div class="row">
                  <div class="col-lg-12">
                     <div class="section-title">
                        <h5
                           style="
                              font-size: 30px;
                              color: #fff;
                              font-weight: bold;
                           ">
                           Xem chi tiết phòng để có trải nghiệm tốt hơn bạn nhé
                        </h5>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div>
      <!--==================================== -->
      <div class="room-details-slider">
         <div class="container">
            <div class="room__details__pic__slider owl-carousel">
               <% let img=data.imgData%> <%img.forEach(item=>{%>
               <div
                  class="room__details__pic__slider__item set-bg"
                  data-setbg="<%= item.url %>"></div>
               <% }) %>
            </div>
         </div>
      </div>
      <!-- Room Details Slider End -->

      <!-- Rooms Details Section Begin -->
      <section class="room-details spad">
         <div class="container">
            <div class="row">
               <div class="col-lg-12">
                  <div class="room__details__content">
                     <div class="room__details__title">
                        <h2><%= data.nameType%> - <%= data.price%>,000đ</h2>

                        <a
                           href="/rooms/booking/<%= data.typeID%>"
                           class="primary-btn"
                           >Đặt ngay</a
                        >
                     </div>

                     <div class="room__details__desc">
                        <h2>Mô tả:</h2>
                        <p><%- data.description%></p>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </section>

      <div class="container mt-3">
         <div
            style="margin-bottom: 50px"
            class="row d-flex justify-content-center">
            <div class="col-md-12">
               <div
                  class="headings d-flex justify-content-between align-items-center mb-3">
                  <h2>Tất cả bình luận(<%= commentList.length %>)</h2>
               </div>
               <div class="row">
                  <div class="col-md-10">
                     <% if (isLogin) { %>
                     <div class="input-group mb-3 d-flex">
                        <input
                           style="height: 45px"
                           type="text"
                           class="form-control"
                           id="content"
                           placeholder="Nhập nội dung bình luận" />
                        <div class="input-group-append">
                           <button
                              class="btn btn-primary"
                              type="button"
                              id="submitComment">
                              Gửi
                           </button>
                        </div>
                     </div>
                     <% } else { %>
                     <h3 class="text-warning">Đăng nhập để bình luận.</h3>
                     <% } %>
                  </div>
               </div>

               <% commentList.forEach(function(comment) { %>
               <div class="card p-3 mt-3">
                  <div
                     class="d-flex justify-content-between align-items-center">
                     <div class="user d-flex flex-row align-items-center">
                        <img
                           src="https://i.imgur.com/hczKIze.jpg"
                           width="40"
                           class="user-img rounded-circle mr-2" />
                        <span>
                           <small
                              style="font-size: 15px"
                              class="font-weight-bold text-primary"
                              ><%= comment.userComment.username %></small
                           >
                           <small
                              style="font-size: 15px"
                              class="font-weight-bold"
                              ><%= comment.content %></small
                           >
                        </span>
                     </div>
                     <small
                        ><%= comment.createdAt.toLocaleString('vi-VN', {
                        timeZone: 'Asia/Ho_Chi_Minh' }) %></small
                     >
                  </div>
               </div>
               <% }); %>
            </div>
         </div>
      </div>

      <!-- Js Plugins -->

      <script src="/client/js/jquery-3.3.1.min.js"></script>
      <script src="/client/js/jquery.nice-select.min.js"></script>
      <script src="/client/js/jquery-ui.min.js"></script>
      <script src="/client/js/jquery.slicknav.js"></script>
      <script src="/client/js/owl.carousel.min.js"></script>
      <script src="/client/js/main.js"></script>
      <script src="/client/js/header.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.js"></script>

      <!-- Js Plugins -->

      <script src="/client/js/toastr.js"></script>
      <script src="/client/js/setheader.js"></script>
      <script>
         $(function () {
            toastr.options = {
               closeButton: false,
               debug: true,
               newestOnTop: false,
               progressBar: false,
               positionClass: 'toast-top-right',
               preventDuplicates: false,
               onclick: null,
               showDuration: '300',
               hideDuration: '2000',
               timeOut: '2000',
               extendedTimeOut: '1000',
               showEasing: 'swing',
               hideEasing: 'linear',
               showMethod: 'fadeIn',
               hideMethod: 'fadeOut',
            };
            $('.btn-no-vacancy').click(function () {
               toastr['warning']('Rất tiếc hiện tại đã hết phòng');
            });
         });

         $('#submitComment').click(function () {
            sendComment();
         });

         // Xử lý khi nhấn phím Enter trong ô input
         $('#content').keypress(function (event) {
            if (event.which === 13) {
               sendComment();
            }
         });
         function sendComment() {
            var content = $('#content').val();
            var typeID = getParameterByName('typeID');
            var url = '/rooms/comment?typeID=' + typeID;

            // Gửi request POST tới API
            $.ajax({
               url: url,
               type: 'POST',
               data: { content: content },
               success: function (response) {
                  // Xử lý thành công
                  location.reload();
               },
               error: function () {
                  // Xử lý lỗi
                  alert('Có lỗi xảy ra khi gửi bình luận.');
               },
            });
         }

         function getParameterByName(name) {
            var url = window.location.href;
            name = name.replace(/[\[\]]/g, '\\$&');
            var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
               results = regex.exec(url);
            if (!results) {
               regex = new RegExp('/' + name + '/([^&#]*)');
               results = regex.exec(url);
            }
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, ' '));
         }
      </script>
   </body>
</html>
